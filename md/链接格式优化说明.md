# 文档链接格式优化说明

## 优化目标

1. **去掉路径前缀** - 不使用 `md/`、`./`、`../md/` 等路径前缀
2. **使用短链接** - 链接文字简洁明了
3. **统一格式** - 所有链接使用相同格式

## 优化前后对比

### 优化前（旧格式）

```markdown
带路径前缀：
- [项目结构说明](md/PROJECT_STRUCTURE.md)
- [Git扫描功能说明](md/仓库并发扫描功能说明.md)

带相对路径：
- [交互式报告使用说明](./交互式报告使用说明.md)

长链接名称：
- [仓库并发扫描功能说明.md](仓库并发扫描功能说明.md)
```

### 优化后（新格式）

```markdown
简洁格式：
- [项目结构说明](PROJECT_STRUCTURE.md)
- [Git扫描功能说明](仓库并发扫描功能说明.md)

统一格式：
- [交互式报告使用说明](交互式报告使用说明.md)

短链接名称：
- [并发扫描](仓库并发扫描功能说明.md)
- [个性化寄语](个性化年度寄语功能说明.md)
```

## 链接格式规范

### ✅ 推荐格式

```markdown
# 1. 短名称 + 文件名
[并发扫描](仓库并发扫描功能说明.md)

# 2. 描述性名称 + 文件名
[Git并发扫描功能](仓库并发扫描功能说明.md)

# 3. 无路径前缀
[使用说明](交互式报告使用说明.md)
```

### ❌ 不推荐格式

```markdown
# 1. 带路径前缀
[并发扫描](md/仓库并发扫描功能说明.md)  ❌
[并发扫描](./仓库并发扫描功能说明.md)  ❌

# 2. 带相对路径
[使用说明](./交互式报告使用说明.md)  ❌
[使用说明](../md/交互式报告使用说明.md)  ❌

# 3. 文件名作为链接文字
[仓库并发扫描功能说明.md](仓库并发扫描功能说明.md)  ❌
```

## 链接分类

### 核心文档链接

用于主要文档之间的引用：

```markdown
[README](README.md)
[快速开始](GETTING_STARTED.md)
[使用指南](USAGE.md)
[更新日志](CHANGELOG.md)
```

### 功能说明链接

引用具体功能说明文档：

```markdown
[并发扫描](仓库并发扫描功能说明.md)
[增量缓存](Git扫描增量持久化功能说明.md)
[智能续跑](智能续跑功能实现说明.md)
[个性化寄语](个性化年度寄语功能说明.md)
```

### 代码引用链接

引用代码文件中的具体位置：

```markdown
[git_collector.py:114-137](../src/git_collector.py#L114-L137)
[report_generator.py:206-234](../src/report_generator.py#L206-L234)
```

### 目录引用链接

引用其他目录的文件：

```markdown
[配置文件](../config/author_mapping.yaml)
[模板文件](../templates/report_story_scroll.html)
```

## 实施方案

### 方案1: 手动更新（适合少量文档）

**步骤：**

1. 打开需要修改的文档
2. 查找所有链接：`\[.*\]\(.*\.md\)`
3. 去除路径前缀
4. 缩短链接文字
5. 保存文件

**示例：**

```diff
- 参考 [Git扫描功能说明](md/仓库并发扫描功能说明.md)
+ 参考 [并发扫描](仓库并发扫描功能说明.md)
```

### 方案2: 批量替换（适合大量文档）

**VSCode 正则表达式替换：**

```
查找: \[([^\]]+)\]\(\.?/?md/([^)]+)\)
替换: [$1]($2)
```

**效果：**
```diff
- [说明](md/文件.md)
+ [说明](文件.md)

- [说明](./md/文件.md)
+ [说明](文件.md)
```

## 使用场景

### 场景1: 文档内部引用

**需求：** 在功能说明文档中引用其他相关文档

```markdown
## 相关功能

- [并发扫描](仓库并发扫描功能说明.md) - 多项目并行采集
- [增量缓存](Git扫描增量持久化功能说明.md) - 避免重复扫描
- [智能续跑](智能续跑功能实现说明.md) - 断点续跑
```

### 场景2: 参考链接

**需求：** 在代码注释中引用详细说明文档

```markdown
<!-- 详见 [照片墙播放优化说明](照片墙播放优化说明.md) -->
```

### 场景3: 首页/汇总文档

**需求：** 在README等汇总文档中列出所有功能说明

```markdown
## 功能说明文档

### Git采集
- [并发扫描](仓库并发扫描功能说明.md)
- [增量缓存](Git扫描增量持久化功能说明.md)

### 报告生成
- [智能续跑](智能续跑功能实现说明.md)
- [个性化寄语](个性化年度寄语功能说明.md)
```

## 链接文字规范

### ✅ 好的链接文字

```markdown
# 简洁明了
[并发扫描](仓库并发扫描功能说明.md)
[续跑功能](智能续跑功能实现说明.md)

# 描述性强
[多项目并发扫描](仓库并发扫描功能说明.md)
[断点续跑功能](智能续跑功能实现说明.md)

# 动词开头
[查看并发扫描说明](仓库并发扫描功能说明.md)
[了解续跑功能](智能续跑功能实现说明.md)
```

### ❌ 不好的链接文字

```markdown
# 直接用文件名
[仓库并发扫描功能说明.md](仓库并发扫描功能说明.md)

# 过于简略
[说明](仓库并发扫描功能说明.md)
[文档](仓库并发扫描功能说明.md)

# 重复冗余
[点击查看](仓库并发扫描功能说明.md)
[这里](仓库并发扫描功能说明.md)
```

## 代码引用链接格式

**格式：** `[描述](文件路径#L行号-L行号)`

**示例：**
```markdown
# 单行引用
[加载映射](../src/report_generator.py#L115-L121)

# 多行引用
[应用映射](../src/report_generator.py#L123-L135)

# 函数引用
[load_author_mapping](../src/report_generator.py#L115-L121)
```

**注意：**
- 代码引用使用相对路径 `../src/`
- 行号使用 `#L` 前缀
- 范围使用 `-L` 连接

## 维护指南

### 添加新文档

1. **创建文档**
   ```bash
   touch md/新功能说明.md
   ```

2. **在其他文档中引用**
   ```markdown
   [新功能](新功能说明.md)
   ```

### 重命名文档

1. **重命名文件**
   ```bash
   mv md/旧名称.md md/新名称.md
   ```

2. **更新所有引用**
   - 使用IDE的全局搜索
   - 搜索旧文件名
   - 替换为新文件名

### 删除文档

1. **检查引用**
   - 搜索所有指向该文档的链接

2. **删除或更新引用**
   - 删除相关链接
   - 或替换为其他文档

3. **删除文件**
   ```bash
   rm md/旧功能说明.md
   ```

## 验证检查

### 检查清单

- [ ] 所有链接都去掉了路径前缀（`md/`、`./`、`../`）
- [ ] 链接文字简洁明了
- [ ] 没有使用文件名作为链接文字
- [ ] 所有引用的文档都存在

### 验证工具

**方法1: VSCode正则表达式搜索**

```
查找无效链接：
\[([^\]]+)\]\(\.?/?md/([^)]+)\)

查找文件名作为链接：
\[.*\.md\]\(.*\.md\)
```

**方法2: 命令行检查**

```bash
# 查找所有带路径前缀的链接
grep -r '\[.*\](md/' md/
grep -r '\[.*\](\./md/' md/

# 查找所有带相对路径的链接
grep -r '\[.*\](\./' md/
```

## 效果对比

### 优化前

```markdown
## 相关文档

- 详细说明参见 [仓库并发扫描功能说明.md](md/仓库并发扫描功能说明.md)
- 代码位置 [src/git_collector.py:114-137](src/git_collector.py#L114-L137)
- 使用方法见 [交互式报告使用说明](./交互式报告使用说明.md)
```

### 优化后

```markdown
## 相关文档

- [并发扫描](仓库并发扫描功能说明.md) - 多项目并行采集
- [代码位置](../src/git_collector.py#L114-L137) - 时间范围过滤
- [使用指南](交互式报告使用说明.md) - 详细操作步骤
```

**改进点：**
- ✅ 去掉了 `md/` 路径前缀
- ✅ 链接文字更简洁
- ✅ 添加了描述性文字
- ✅ 统一了格式

## 最佳实践

### 1. 保持一致性

同一类型的文档使用相同的引用格式：

```markdown
# 功能说明文档统一格式
[并发扫描](仓库并发扫描功能说明.md)
[智能续跑](智能续跑功能实现说明.md)
[个性化寄语](个性化年度寄语功能说明.md)
```

### 2. 使用语义化文字

链接文字应该描述目标内容，而不是"点击这里"：

```markdown
# ✅ 好的例子
[查看并发扫描说明](仓库并发扫描功能说明.md)

# ❌ 不好的例子
[点击这里](仓库并发扫描功能说明.md)
```

### 3. 适度使用短链接

短链接节省空间，但不要过度牺牲可读性：

```markdown
# 平衡点
[并发扫描](仓库并发扫描功能说明.md)  ✅ 简洁且清晰
[G](仓库并发扫描功能说明.md)  ❌ 过于简略
```

## 版本历史

- **v1.0** - 初始版本
  - 格式规范文档
  - 优化指南

## 相关文件

- [项目结构](PROJECT_STRUCTURE.md) - 文档目录结构
