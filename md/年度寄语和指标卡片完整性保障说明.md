# å¹´åº¦å¯„è¯­å’ŒæŒ‡æ ‡å¡ç‰‡å®Œæ•´æ€§ä¿éšœè¯´æ˜

## é—®é¢˜èƒŒæ™¯

ç”¨æˆ·åé¦ˆï¼š
1. **å¹´åº¦å¯„è¯­ä¸€å®šè¦æœ‰** - å¹´åº¦å¯„è¯­æ˜¯æŠ¥å‘Šçš„æ ¸å¿ƒæƒ…æ„Ÿéƒ¨åˆ†ï¼Œå¿…é¡»å§‹ç»ˆæ˜¾ç¤º
2. **æ€»æŠ¥å‘Šå°½å¯èƒ½å±•ç¤ºæ¯ä¸ªæŒ‡æ ‡å¡ç‰‡** - å±•ç¤ºæ›´ä¸°å¯Œçš„æ•°æ®ç»´åº¦

### é‡åˆ°çš„é—®é¢˜

ä»æ—¥å¿—çœ‹åˆ°ï¼š
```
INFO:src.api:Response content length: 0 characters
WARNING - AIæ–‡æ¡ˆç”Ÿæˆå¤±è´¥æˆ–å†…å®¹è¿‡çŸ­ï¼Œä½¿ç”¨é»˜è®¤æ¨¡æ¿
```

LLMæœåŠ¡å¶å°”è¿”å›ç©ºå“åº”ï¼ˆ0å­—ç¬¦ï¼‰ï¼Œå¯¼è‡´ï¼š
- æ— æ³•ç”ŸæˆAIæ–‡æ¡ˆ
- å›é€€åˆ°é»˜è®¤æ¨¡æ¿
- é»˜è®¤æ¨¡æ¿æ˜¯Markdownæ ¼å¼ï¼Œæ— æ³•è§£æå‡ºæŒ‡æ ‡å¡ç‰‡
- **ç¼ºå°‘å¹´åº¦å¯„è¯­å¡ç‰‡**

## è§£å†³æ–¹æ¡ˆ

### 1. ä¿®æ”¹é»˜è®¤æ–‡æ¡ˆæ ¼å¼

**ä¿®æ”¹æ–‡ä»¶ï¼š** [src/llm_client.py:211-287](src/llm_client.py#L211-L287)

**åŸä»£ç é—®é¢˜ï¼š**
```python
def _get_default_text(self, data: Dict[str, Any]) -> str:
    """è·å–é»˜è®¤æ–‡æ¡ˆ"""
    # è¿”å›Markdownæ ¼å¼
    text = f"""
# ğŸ’Œ è‡´è¿‡å»çš„ä¸€å¹´ï¼šä½ çš„ä»£ç ï¼Œä½ çš„è¯—ç¯‡

åœ¨å†°å†·çš„æ•°å­—èƒŒåï¼Œæ˜¯ä½ ä¸€æ•´å¹´çš„çƒ­å¿±ã€æ€è€ƒå’Œåˆ›é€ ã€‚
## å¹´åˆçš„Flagï¼Œæ˜¯å†™åœ¨æ™¨å…‰é‡Œçš„åºç« 
...
"""
    return text
```

**é—®é¢˜ï¼š** Markdownæ ¼å¼æ— æ³•è¢«XMLè§£æå™¨è¯†åˆ«ï¼Œå¯¼è‡´æ— æ³•ç”ŸæˆæŒ‡æ ‡å¡ç‰‡

**ä¿®å¤åä»£ç ï¼š**
```python
def _get_default_text(self, data: Dict[str, Any]) -> str:
    """è·å–é»˜è®¤æ–‡æ¡ˆï¼ˆXMLæ ¼å¼ï¼ŒåŒ…å«æ‰€æœ‰æŒ‡æ ‡å¡ç‰‡ï¼‰"""
    # ç”Ÿæˆä¸ªæ€§åŒ–å¹´åº¦å¯„è¯­
    ending = self._generate_personalized_ending(summary, time_dist, code_quality, project_count, lang_names)

    # æ„å»ºXMLæ ¼å¼çš„æŒ‡æ ‡å¡ç‰‡
    text = f"""<graphs>
<graph>
<type>æäº¤æ¬¡æ•°</type>
<value>{total_commits}</value>
<title>æ•°å­—ä¸­çš„çƒ­å¿±</title>
<content>è¿™ä¸€å¹´ï¼Œä½ ç”¨{total_commits}æ¬¡æäº¤...</content>
</graph>

<graph>
<type>ä»£ç è¡Œæ•°</type>
<value>{net_lines}</value>
<title>ä»£ç é•¿åŸçš„ç­‘é€ </title>
<content>è¿™æ˜¯ä½ æŠ€æœ¯æˆé•¿çš„å·å³¨ä¸°ç¢‘...</content>
</graph>

<graph>
<type>é¡¹ç›®æ•°é‡</type>
<value>{project_count}</value>
<title>æŠ€æœ¯æ¢ç´¢çš„è¶³è¿¹</title>
<content>åœ¨{project_count}ä¸ªä¸åŒé¡¹ç›®çš„å¹¿é˜”å¤©åœ°ä¸­...</content>
</graph>

<graph>
<type>ç¼–ç¨‹è¯­è¨€</type>
<value>{lang_names[0] if lang_names else 'æœªçŸ¥'}</value>
<title>æŠ€æœ¯çš„æ­¦å™¨åº“</title>
<content>ä»¥{lang_names[0] if lang_names else 'å¤šç§è¯­è¨€'}ä¸ºä¸»è¦æ­¦å™¨...</content>
</graph>

<graph>
<type>é«˜æ•ˆæ—¶æ®µ</type>
<value>{best_hour}</value>
<title>æ·±å¤œçš„ä»£ç éª‘å£«</title>
<content>{best_hour}ç‚¹æ˜¯ä½ åˆ›ä½œçš„é«˜å³°æ—¶æ®µ...</content>
</graph>

<graph>
<type>é‡æ„æ¯”ä¾‹</type>
<value>{refactor_ratio}%</value>
<title>ç²¾ç®€çš„è‰ºæœ¯</title>
<content>ä½ çš„é‡æ„æ¯”ä¾‹è¾¾åˆ°{refactor_ratio}%...</content>
</graph>

<graph>
<type>å¹´åº¦å¯„è¯­</type>
<value>è‡´æ•¬</value>
<title>å†™ç»™æ˜å¤©çš„ä½ </title>
<content>{ending}</content>
</graph>
</graphs>"""
    return text
```

**æ”¹è¿›ç‚¹ï¼š**
- âœ… è¿”å›XMLæ ¼å¼ï¼Œä¸LLMç”Ÿæˆæ ¼å¼ä¸€è‡´
- âœ… åŒ…å«æ‰€æœ‰7ä¸ªæŒ‡æ ‡å¡ç‰‡
- âœ… **å¹´åº¦å¯„è¯­å¡ç‰‡å§‹ç»ˆå­˜åœ¨**
- âœ… ä½¿ç”¨ `_generate_personalized_ending()` ç”Ÿæˆä¸ªæ€§åŒ–å¯„è¯­

### 2. å¢å¼ºLLMè°ƒç”¨é”™è¯¯å¤„ç†

**ä¿®æ”¹æ–‡ä»¶ï¼š** [src/llm_client.py:33-85](src/llm_client.py#L33-L85)

**å¢åŠ çš„éªŒè¯ï¼š**

```python
content = response.choices[0].message.content

# éªŒè¯å“åº”ä¸ä¸ºç©º
if not content or len(content.strip()) == 0:
    raise Exception("LLMè¿”å›ç©ºå“åº”")

# éªŒè¯åŒ…å«graphsæ ‡ç­¾
if '<graphs>' not in content or '</graphs>' not in content:
    print(f"è­¦å‘Šï¼šLLMè¿”å›å†…å®¹ä¸åŒ…å«å®Œæ•´çš„graphsæ ‡ç­¾")
    raise Exception("å“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œç¼ºå°‘graphsæ ‡ç­¾")

print(f"LLMç”ŸæˆæˆåŠŸï¼Œå“åº”é•¿åº¦: {len(content)} å­—ç¬¦")
return content
```

**å¢åŠ max_tokensï¼š**
```python
response = client.chat.completions.create(
    model=self.model,
    messages=[...],
    temperature=0.8,
    max_tokens=4000,  # ä»2000å¢åŠ åˆ°4000ï¼Œç¡®ä¿å®Œæ•´è¾“å‡º
)
```

**æ”¹è¿›ç‚¹ï¼š**
- âœ… éªŒè¯å“åº”ä¸ä¸ºç©º
- âœ… éªŒè¯åŒ…å«å®Œæ•´çš„graphsæ ‡ç­¾
- âœ… å¢åŠ max_tokensé¿å…æˆªæ–­
- âœ… è®°å½•å“åº”é•¿åº¦ä¾¿äºè°ƒè¯•

## ä¿éšœæœºåˆ¶

### ä¸‰å±‚ä¿éšœæœºåˆ¶

```
LLMè°ƒç”¨æˆåŠŸ â†’ è¿”å›AIæ–‡æ¡ˆï¼ˆåŒ…å«7ä¸ªå¡ç‰‡ï¼‰
     â†“ å¤±è´¥
éªŒè¯å“åº”æ ¼å¼ â†’ æ ¼å¼æ­£ç¡® â†’ è¿”å›AIæ–‡æ¡ˆ
     â†“ å¤±è´¥æˆ–ä¸ºç©º
ä½¿ç”¨é»˜è®¤æ¨¡æ¿ â†’ XMLæ ¼å¼ï¼ˆåŒ…å«7ä¸ªå¡ç‰‡ï¼‰
```

### é»˜è®¤æ¨¡æ¿å†…å®¹

å³ä½¿LLMå®Œå…¨å¤±è´¥ï¼Œé»˜è®¤æ¨¡æ¿ä¹Ÿä¿è¯ï¼š

1. **æäº¤æ¬¡æ•°** - å±•ç¤ºæ€»æäº¤æ•°å’Œä»£ç å¢åˆ 
2. **ä»£ç è¡Œæ•°** - å±•ç¤ºå‡€å¢ä»£ç è¡Œ
3. **é¡¹ç›®æ•°é‡** - å±•ç¤ºå‚ä¸çš„é¡¹ç›®æ•°
4. **ç¼–ç¨‹è¯­è¨€** - å±•ç¤ºä¸»è¦è¯­è¨€
5. **é«˜æ•ˆæ—¶æ®µ** - å±•ç¤ºæœ€æ´»è·ƒæ—¶æ®µ
6. **é‡æ„æ¯”ä¾‹** - å±•ç¤ºä»£ç è´¨é‡
7. **å¹´åº¦å¯„è¯­** - âœ… **ä¸ªæ€§åŒ–å¯„è¯­ï¼ˆ20æ¡æ¨¡æ¿ä¹‹ä¸€ï¼‰**

## å¹´åº¦å¯„è¯­ä¸ªæ€§åŒ–

### ä¸ªæ€§åŒ–ç»´åº¦

å¹´åº¦å¯„è¯­æ ¹æ®ä»¥ä¸‹æ•°æ®ç‰¹å¾åŠ¨æ€ç”Ÿæˆï¼š

1. **æäº¤é¢‘ç‡** (`avg_commits_per_month`)
   - é«˜äº§å‹ï¼ˆ>100æ¬¡/æœˆï¼‰ï¼šæè‡´è¾“å‡º
   - ç¨³å¥å‹ï¼ˆ50-100æ¬¡/æœˆï¼‰ï¼šç¨³æ­¥å‰è¿›
   - ç²¾ç®€å‹ï¼ˆ<50æ¬¡/æœˆï¼‰ï¼šå°‘è€Œç²¾

2. **ä»£ç é£æ ¼** (`refactor_ratio`)
   - å®Œç¾ä¸»ä¹‰ï¼ˆ>25%ï¼‰ï¼šä»£ç è‰ºæœ¯å®¶
   - è¿½æ±‚è´¨é‡ï¼ˆ15-25%ï¼‰ï¼šæ‰§ç€å®Œç¾
   - åŠ¡å®é«˜æ•ˆï¼ˆ<15%ï¼‰ï¼šåŠ¡å®é«˜æ•ˆ

3. **å·¥ä½œä¹ æƒ¯** (`best_hour`)
   - æ·±å¤œå¥‹æ–—ï¼ˆ22-5ç‚¹ï¼‰ï¼šæ·±å¤œä»£ç éª‘å£«
   - é»„æ˜å¥‹æ–—ï¼ˆ19-22ç‚¹ï¼‰ï¼šå¤œæ™šå¥‹æ–—
   - ç™½å¤©é«˜æ•ˆï¼ˆå…¶ä»–æ—¶æ®µï¼‰ï¼šé«˜æ•ˆè‡ªå¾‹

4. **é¡¹ç›®å¹¿åº¦** (`project_count`)
   - å¤šç‚¹å¼€èŠ±ï¼ˆâ‰¥5ä¸ªï¼‰ï¼šæŠ€æœ¯æ¢ç´¢è€…
   - æ·±è€•ç»†ä½œï¼ˆ<5ä¸ªï¼‰ï¼šä¸“æ³¨æ·±è€•

5. **æŠ€æœ¯ä¸“ç²¾** (`lang_names`)
   - å•ä¸€è¯­è¨€ï¼šæŠ€æœ¯ä¸“å®¶
   - å¤šè¯­è¨€ï¼ˆâ‰¥3ç§ï¼‰ï¼šæŠ€æœ¯å¤šé¢æ‰‹

### ä¸ªæ€§åŒ–ç¤ºä¾‹

**é«˜äº§å‹ + å®Œç¾ä¸»ä¹‰ + æ·±å¤œå¥‹æ–—ï¼š**
```
è¿™ä¸€å¹´ï¼Œä½ ç”¨1234æ¬¡æäº¤è¯ é‡Šäº†ä»€ä¹ˆå«ã€Œæè‡´è¾“å‡ºã€ã€‚æ˜Ÿå…‰ä¸é—®èµ¶è·¯äººï¼Œ
ä½ çš„ä»£ç æ—©å·²é“ºå°±é€šå¾€æ˜å¤©çš„è·¯ã€‚25%çš„é‡æ„å æ¯”ï¼Œæš´éœ²äº†ä½ ä½œä¸ºã€Œä»£ç è‰ºæœ¯å®¶ã€
çš„æœ¬è‰²ã€‚æ·±å¤œ23ç‚¹æ˜¯ä½ çš„åˆ›ä½œé«˜å³°ï¼Œé‚£äº›æ·±å¤œæ•²ä¸‹çš„ä»£ç ï¼Œå¸¦ç€ç‰¹åˆ«çš„æ¸©åº¦â€”â€”
æ˜Ÿå…‰ä¸é—®èµ¶è·¯äººï¼Œæ—¶å…‰ç»ˆä¸è´Ÿå¤œè¡Œè€…ã€‚
```

**ç¨³å¥å‹ + åŠ¡å®é«˜æ•ˆ + ç™½å¤©è‡ªå¾‹ï¼š**
```
ç¨³å¥çš„567æ¬¡æäº¤ï¼Œè§è¯äº†ä½ ä¸€å¹´æ¥çš„æˆé•¿ä¸çªç ´ã€‚ä»£ç å¦‚è¯—ï¼Œä½ ç”¨åšæŒ
ç»­å†™ç€å±äºè‡ªå·±çš„ç¯‡ç« ã€‚åœ¨12ç‚¹çš„é«˜æ•ˆæ—¶æ®µï¼Œä½ å±•ç°äº†è‡ªå¾‹çš„å·¥ä½œèŠ‚å¥ã€‚
æ˜Ÿå…‰ä¸é—®èµ¶è·¯äººï¼Œæ„¿ä½ çš„æ¯ä¸€æ­¥éƒ½èµ°å¾—åšå®šè€Œä»å®¹ã€‚
```

## æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹1: LLMæ­£å¸¸å·¥ä½œ

**æ­¥éª¤ï¼š**
1. é…ç½®æœ‰æ•ˆçš„LLM API
2. ç”ŸæˆæŠ¥å‘Š

**é¢„æœŸç»“æœï¼š**
- âœ… LLMè¿”å›å®Œæ•´çš„XMLæ ¼å¼
- âœ… åŒ…å«7ä¸ªæŒ‡æ ‡å¡ç‰‡
- âœ… å¹´åº¦å¯„è¯­æ ¹æ®æ•°æ®ç‰¹å¾ç”Ÿæˆ
- âœ… æ—¥å¿—æ˜¾ç¤º "LLMç”ŸæˆæˆåŠŸï¼Œå“åº”é•¿åº¦: XXX å­—ç¬¦"

### æµ‹è¯•ç”¨ä¾‹2: LLMè¿”å›ç©ºå“åº”

**æ­¥éª¤ï¼š**
1. æ¨¡æ‹ŸLLMè¿”å›ç©ºå­—ç¬¦ä¸²
2. ç”ŸæˆæŠ¥å‘Š

**é¢„æœŸç»“æœï¼š**
- âœ… æ•è· "LLMè¿”å›ç©ºå“åº”" é”™è¯¯
- âœ… ä½¿ç”¨é»˜è®¤XMLæ¨¡æ¿
- âœ… åŒ…å«7ä¸ªæŒ‡æ ‡å¡ç‰‡
- âœ… å¹´åº¦å¯„è¯­ä½¿ç”¨ä¸ªæ€§åŒ–æ¨¡æ¿

### æµ‹è¯•ç”¨ä¾‹3: LLMè¿”å›æ ¼å¼é”™è¯¯

**æ­¥éª¤ï¼š**
1. æ¨¡æ‹ŸLLMè¿”å›ä¸åŒ…å«graphsæ ‡ç­¾çš„å†…å®¹
2. ç”ŸæˆæŠ¥å‘Š

**é¢„æœŸç»“æœï¼š**
- âœ… æ•è· "å“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œç¼ºå°‘graphsæ ‡ç­¾" è­¦å‘Š
- âœ… ä½¿ç”¨é»˜è®¤XMLæ¨¡æ¿
- âœ… åŒ…å«7ä¸ªæŒ‡æ ‡å¡ç‰‡
- âœ… å¹´åº¦å¯„è¯­ä½¿ç”¨ä¸ªæ€§åŒ–æ¨¡æ¿

### æµ‹è¯•ç”¨ä¾‹4: æ— API Key

**æ­¥éª¤ï¼š**
1. ä¸é…ç½®LLM API
2. ç”ŸæˆæŠ¥å‘Š

**é¢„æœŸç»“æœï¼š**
- âœ… ç›´æ¥ä½¿ç”¨é»˜è®¤XMLæ¨¡æ¿
- âœ… åŒ…å«7ä¸ªæŒ‡æ ‡å¡ç‰‡
- âœ… å¹´åº¦å¯„è¯­ä½¿ç”¨ä¸ªæ€§åŒ–æ¨¡æ¿
- âœ… æ— é”™è¯¯æ—¥å¿—

## æ—¥å¿—è¾“å‡º

### æˆåŠŸåœºæ™¯

```
client_kwargs:{'api_key': 'sk-xxx', 'base_url': 'http://localhost:8000/v1'}
LLMç”ŸæˆæˆåŠŸï¼Œå“åº”é•¿åº¦: 2856 å­—ç¬¦
æˆåŠŸè§£æ 7 ä¸ªæŒ‡æ ‡å¡ç‰‡
```

### å¤±è´¥åœºæ™¯

```
client_kwargs:{'api_key': 'sk-xxx', 'base_url': 'http://localhost:8000/v1'}
LLMç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ–‡æ¡ˆ: LLMè¿”å›ç©ºå“åº”
æˆåŠŸè§£æ 7 ä¸ªæŒ‡æ ‡å¡ç‰‡  # ä½¿ç”¨é»˜è®¤æ¨¡æ¿
```

### æ ¼å¼é”™è¯¯åœºæ™¯

```
client_kwargs:{'api_key': 'sk-xxx', 'base_url': 'http://localhost:8000/v1'}
è­¦å‘Šï¼šLLMè¿”å›å†…å®¹ä¸åŒ…å«å®Œæ•´çš„graphsæ ‡ç­¾
LLMç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ–‡æ¡ˆ: å“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œç¼ºå°‘graphsæ ‡ç­¾
æˆåŠŸè§£æ 7 ä¸ªæŒ‡æ ‡å¡ç‰‡  # ä½¿ç”¨é»˜è®¤æ¨¡æ¿
```

## ä»£ç å˜æ›´æ€»ç»“

### ä¿®æ”¹çš„æ–‡ä»¶

**src/llm_client.py**
- **ç¬¬33-85è¡Œ** - å¢å¼ºé”™è¯¯å¤„ç†å’Œå“åº”éªŒè¯
- **ç¬¬211-287è¡Œ** - å°†é»˜è®¤æ¨¡æ¿æ”¹ä¸ºXMLæ ¼å¼ï¼ŒåŒ…å«æ‰€æœ‰7ä¸ªå¡ç‰‡

### å…³é”®æ”¹è¿›

1. **æ ¼å¼ç»Ÿä¸€**
   - LLMç”Ÿæˆï¼šXMLæ ¼å¼
   - é»˜è®¤æ¨¡æ¿ï¼šXMLæ ¼å¼
   - è§£æå™¨ï¼šç»Ÿä¸€è§£æXML

2. **å®Œæ•´æ€§ä¿è¯**
   - å§‹ç»ˆåŒ…å«7ä¸ªæŒ‡æ ‡å¡ç‰‡
   - å¹´åº¦å¯„è¯­å§‹ç»ˆå­˜åœ¨
   - æ— æ•°æ®æ—¶ä½¿ç”¨é€šç”¨æ–‡æ¡ˆ

3. **ä¸ªæ€§åŒ–å¢å¼º**
   - 20ä¸ªä¸ªæ€§åŒ–ç»“å°¾æ¨¡æ¿
   - 5ä¸ªæ•°æ®ç»´åº¦åˆ†æ
   - åŠ¨æ€ç»„åˆé¿å…é‡å¤

## ç”¨æˆ·å½±å“

### ä¹‹å‰çš„é—®é¢˜

- âŒ LLMå¤±è´¥æ—¶åªæ˜¾ç¤ºMarkdownæ–‡æœ¬ï¼Œæ— æŒ‡æ ‡å¡ç‰‡
- âŒ å¹´åº¦å¯„è¯­å¯èƒ½ç¼ºå¤±
- âŒ ç”¨æˆ·ä½“éªŒä¸ä¸€è‡´

### ç°åœ¨çš„ä¿è¯

- âœ… æ— è®ºLLMæ˜¯å¦æˆåŠŸï¼Œéƒ½æ˜¾ç¤º7ä¸ªæŒ‡æ ‡å¡ç‰‡
- âœ… å¹´åº¦å¯„è¯­å§‹ç»ˆå­˜åœ¨ä¸”ä¸ªæ€§åŒ–
- âœ… ç”¨æˆ·ä½“éªŒä¸€è‡´
- âœ… å³ä½¿æ— API Keyä¹Ÿèƒ½ç”Ÿæˆå®Œæ•´æŠ¥å‘Š

## æœªæ¥ä¼˜åŒ–å»ºè®®

### 1. ç¼“å­˜LLMå“åº”

```python
# ç¼“å­˜æˆåŠŸçš„LLMå“åº”ï¼Œé¿å…é‡å¤è°ƒç”¨
cache_key = f"llm_{author}_{year}_{hash(data)}"
if cache.exists(cache_key):
    return cache.get(cache_key)
```

### 2. é‡è¯•æœºåˆ¶

```python
# LLMå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•1-2æ¬¡
for attempt in range(3):
    try:
        return call_llm(data)
    except Exception:
        if attempt == 2:
            return get_default_text(data)
        time.sleep(2 ** attempt)
```

### 3. æ›´å¤šæŒ‡æ ‡å¡ç‰‡

å¯ä»¥è€ƒè™‘æ·»åŠ ï¼š
- æœ€å¸¸ä¿®æ”¹çš„æ–‡ä»¶
- æäº¤æ¶ˆæ¯æƒ…æ„Ÿåˆ†æ
- åä½œç½‘ç»œï¼ˆå¦‚æœæœ‰å¤šäººï¼‰
- ä»£ç å¤æ‚åº¦è¶‹åŠ¿

### 4. å¤šè¯­è¨€æ”¯æŒ

æ”¯æŒä¸åŒè¯­è¨€çš„å¹´åº¦æŠ¥å‘Šï¼š
- è‹±æ–‡ç‰ˆ
- ä¸­æ–‡ç‰ˆï¼ˆå½“å‰ï¼‰
- æ—¥è¯­ç‰ˆ
- ç­‰

## ç›¸å…³æ–‡ä»¶

- **LLMå®¢æˆ·ç«¯ï¼š** [src/llm_client.py](src/llm_client.py)
- **ç…§ç‰‡å¢™è§£æï¼š** [templates/report_story_scroll.html:698-736](templates/report_story_scroll.html#L698-L736)
- **ä¸ªæ€§åŒ–ç”Ÿæˆï¼š** [src/llm_client.py:289-418](src/llm_client.py#L289-L418)

## ç‰ˆæœ¬å†å²

- **v1.0** - åˆå§‹å®ç°
  - LLMç”ŸæˆXMLæ ¼å¼
  - Markdownæ ¼å¼é»˜è®¤æ¨¡æ¿

- **v1.1** - ä¿®å¤å¹´åº¦å¯„è¯­ç¼ºå¤±ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
  - âœ… é»˜è®¤æ¨¡æ¿æ”¹ä¸ºXMLæ ¼å¼
  - âœ… åŒ…å«æ‰€æœ‰7ä¸ªæŒ‡æ ‡å¡ç‰‡
  - âœ… å¹´åº¦å¯„è¯­å§‹ç»ˆå­˜åœ¨
  - âœ… å¢å¼ºé”™è¯¯å¤„ç†
  - âœ… å¢åŠ max_tokensåˆ°4000

## æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¿®æ”¹ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š

1. **å¹´åº¦å¯„è¯­100%å­˜åœ¨**
   - LLMæˆåŠŸï¼šAIç”Ÿæˆä¸ªæ€§åŒ–å¯„è¯­
   - LLMå¤±è´¥ï¼šä½¿ç”¨20ä¸ªä¸ªæ€§åŒ–æ¨¡æ¿ä¹‹ä¸€

2. **æŒ‡æ ‡å¡ç‰‡å®Œæ•´æ€§**
   - å§‹ç»ˆåŒ…å«7ä¸ªå¡ç‰‡
   - æ•°æ®ä¸è¶³æ—¶ä½¿ç”¨é€šç”¨æ–‡æ¡ˆ

3. **å¥å£®æ€§å¢å¼º**
   - å¤šå±‚éªŒè¯æœºåˆ¶
   - è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
   - ä¼˜é›…é™çº§

ç°åœ¨æ— è®ºLLMæœåŠ¡æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œç”¨æˆ·éƒ½èƒ½è·å¾—å®Œæ•´ã€ç¾è§‚çš„å¹´åº¦æŠ¥å‘Šï¼ŒåŒ…å«æ„Ÿäººçš„å¹´åº¦å¯„è¯­ï¼
