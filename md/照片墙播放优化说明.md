# 照片墙播放优化说明

## 修改内容

### 1. ✅ 自动播放时间调整
- **修改前**：每屏停留5秒
- **修改后**：每屏停留3秒
- **位置**：[templates/report_story_scroll.html:1123](templates/report_story_scroll.html#L1123)

### 2. ✅ 添加倒计时动画
在右上角添加环形倒计时进度条，显示当前屏幕剩余时间。

#### CSS样式（第468-518行）
```css
.countdown-container {
    position: fixed;
    top: 30px;
    right: 30px;
    z-index: 100;
}

.countdown-ring {
    width: 60px;
    height: 60px;
}

.countdown-ring .progress-ring {
    stroke: var(--accent-color);
    stroke-linecap: round;
    transition: stroke-dashoffset 0.1s linear;
}
```

#### HTML结构（第894-904行）
```html
<div class="countdown-container" id="countdownContainer">
    <div class="countdown-ring">
        <svg viewBox="0 0 100 100">
            <circle class="bg-ring" cx="50" cy="50" r="45"></circle>
            <circle class="progress-ring" id="countdownRing" cx="50" cy="50" r="45"
                stroke-dasharray="283" stroke-dashoffset="0"></circle>
        </svg>
        <div class="countdown-number" id="countdownNumber">3</div>
    </div>
</div>
```

#### JavaScript逻辑（第1066-1089行）
```javascript
// 启动倒计时动画
let countdown = 3;
const circumference = 2 * Math.PI * 45; // r=45

// 每100毫秒更新一次倒计时动画
const countdownInterval = setInterval(() => {
    countdown -= 0.1;
    if (countdown <= 0) {
        countdown = 3;
    }
    updateCountdown(countdown, circumference);
}, 100);

// 倒计时更新函数
function updateCountdown(value, circumference) {
    const offset = circumference - (value / 3) * circumference;
    countdownRing.style.strokeDashoffset = offset;
    countdownNumber.textContent = Math.ceil(value);
}
```

### 3. ✅ 删除键盘提示
移除了左下角的"↑↓ 导航 Space 播放"提示。

#### 删除内容：
- CSS样式：`.keyboard-hint` 和 `.keyboard-hint kbd`（第468-486行）
- HTML结构：键盘提示div（第894-897行）
- JavaScript变量：`scrollHints`（第939行）
- JavaScript事件：scroll-hint点击监听（第1028-1033行）
- updateNavigation中的提示控制逻辑（第975-978行）
- 标题屏中的滚动提示箭头（第831-833行）

## 视觉效果

### 倒计时动画
- **位置**：右上角
- **样式**：环形进度条，中心显示数字
- **颜色**：使用主题色accent-color
- **动画**：每100ms平滑更新，数字从3倒数到1
- **显示时机**：仅在自动播放时显示

### 播放流程
1. 页面加载1秒后自动开始播放
2. 右上角显示倒计时（3→2→1）
3. 倒计时结束，自动切换到下一屏
4. 到达最后一屏后停止播放
5. 显示"查看完整报告"按钮

## 性能优化

- **高频率更新**：倒计时每100ms更新一次，确保动画流畅
- **低开销**：使用CSS transform和stroke-dashoffset，GPU加速
- **按需显示**：仅在自动播放时显示倒计时，节省资源

## 相关文件

- **CSS样式**：[templates/report_story_scroll.html:468-518](templates/report_story_scroll.html#L468-L518)
- **HTML结构**：[templates/report_story_scroll.html:894-904](templates/report_story_scroll.html#L894-L904)
- **JavaScript逻辑**：[templates/report_story_scroll.html:1066-1136](templates/report_story_scroll.html#L1066-L1136)
- **播放间隔**：[templates/report_story_scroll.html:1123](templates/report_story_scroll.html#L1123)

## 用户体验改进

1. **更快的节奏**：从5秒减少到3秒，更适合快速浏览
2. **视觉反馈**：倒计时动画让用户知道何时切换
3. **简洁界面**：删除键盘提示，界面更清爽
4. **智能暂停**：鼠标悬停时自动暂停播放
